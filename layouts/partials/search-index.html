<script>
  window.store = {
      // You can specify your blog section only:
      {{ range where .Site.Pages "Section" "blog" }}
      // For all pages in your site, use "range .Site.Pages"
      // You can use any unique identifier here
      "{{ .Permalink }}": {
          // You can customize your searchable fields using any .Page parameters
          "title": "{{ .Title  }}",
          "tags": [{{ range .Params.Tags }}"{{ . }}",{{ end }}],
          "content": {{ .Content | plainify }}, // Strip out HTML tags
          "url": "{{ .Permalink }}"
      },
      {{ end }}
  };
</script>

<!-- Lunr loading script -->
<script
  src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"
  integrity="sha256-DFDZACuFeAqEKv/7Vnu1Tt5ALa58bcWZegGGFNgET8g="
  crossorigin="anonymous"
></script>

<!-- JS build process: https://gohugo.io/hugo-pipes/js/ -->
{{ $js := resources.Get "js/search.js" | js.Build }}
<!-- SRI hashing: https://gohugo.io/hugo-pipes/fingerprint/ -->
{{ $secureJS := $js | resources.Fingerprint "sha256" }}
<script
  src="{{ $secureJS.RelPermalink }}"
  integrity="{{ $secureJS.Data.Integrity }}"
></script>
